<% if (pesanan.length === 0) { %>
  <tr>
    <td colspan="7" class="px-5 py-10 text-center text-gray-500">
      Tidak ada pesanan.
    </td>
  </tr>
<% } else { %>
  <% pesanan.forEach(p => { %>
    <tr>
      <td class="px-5 py-3"><%= p.id_pesanan %></td>
      <td class="px-5 py-3"><%= new Date(p.tanggal_pesan).toLocaleString('id-ID') %></td>
      <td class="px-5 py-3"><%= p.Meja ? p.Meja.no_meja : '-' %></td>
      <td class="px-5 py-3">
        <% if (p.Keranjangs && p.Keranjangs.length > 0) { %>
          <%= p.Keranjangs.map(k => `${k.Menu.nama} Ã— ${k.jumlah}`).join('<br>') %>
        <% } else { %> - <% } %>
      </td>
      <td class="px-5 py-3 font-bold text-orange-600">
        Rp <%= p.Keranjangs.reduce((sum,k)=>sum+(k.Menu.harga*k.jumlah),0).toLocaleString('id-ID') %>
      </td>
      <td class="px-5 py-3"><%= p.status_pesanan %></td>
      <td class="px-5 py-3">
        <form action="/admin/daftar-pesanan/<%= p.id_pesanan %>/update" method="POST">
          <select name="status_pesanan" class="border rounded px-2 py-1 text-sm">
            <option <%= p.status_pesanan==="Menunggu Pembayaran"?"selected":"" %>>Menunggu Pembayaran</option>
            <option <%= p.status_pesanan==="Diproses"?"selected":"" %>>Diproses</option>
            <option <%= p.status_pesanan==="Selesai"?"selected":"" %>>Selesai</option>
          </select>
          <button type="submit" class="bg-orange-500 text-white px-3 py-1 rounded text-sm ml-2">Update</button>
        </form>
      </td>
    </tr>
  <% }) %>
<% } %>
